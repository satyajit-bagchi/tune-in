<html>
<body>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
	<link rel="icon" type="image/png" sizes="174x174" href="./style/favicon.png">
	<script src="https://tonejs.github.io/build/Tone.js"></script>
	<script src="./scripts/jquery.min.js"></script>
	<script src="./scripts/draggabilly.js"></script>
	<script src="./scripts/StartAudioContext.js"></script>
	<script src="./scripts/Interface.js"></script>
	<script src="https://tonejs.github.io/Logo/build/Logo.js"></script>
	<script src="./scripts/Keyboard.js"></script>
  <script src="https://www.gstatic.com/firebasejs/5.4.2/firebase.js"></script>
  <style>
  body {
  background-color: #96CDCD;
}

#container1 {
  background-image: url("https://graphicburger.com/wp-content/uploads/2017/09/6-Fine-Wood-Textures-Vol3-600.jpg");
  margin: auto;
  width: 724px;
  height: 175px;
  border-radius: 4px;
}

#container2 {
  margin: auto;
  background-color: black;
  overflow: overlay;
  width: 686px;
  /*position: fixed; */
  padding-top: 15px;
  padding-left: 10px;
  padding-right: 10px;
  padding-bottom: 5px;
  border-radius 20px;
}
.key {
  float: left;
  position: relative;
  border-radius: 2px;
}

.white_key {
  background-color: white;
  border:1px solid black;
  height: 100px;
  width: 12px;
  z-index: 1;
}

.white_key:active {
  height: 98px;
  border-radius: 3px;
}

.black_key {
  background-color: black;
  height: 70px;
  width: 10px;
  margin-left: -5px;
  margin-right: -5px;
  z-index: 2;
}

.black_key:active {
  height: 68px;
  border-radius: 2.5px;
}

</style>
  <script>
  var notesplayed = [];
  var notes = [
    "440", "880", "1200", "440", "880", "1200", "440", "880", "1200", "440", "880", "1200"
  ];
  function writeMelodyJson(noteplayed){
        // Create an entry
        var postData = {
          "notes":[{
              "duration": 0.39,
              "name": noteplayed,
              "time": 0
            }
          ]// Get a key for a new Post.
        }
        firebase.database().ref().child('midiwrite').update(postData);
      }
var synth = new Tone.Synth().toMaster();

function pushSound(note) {
    synth.triggerAttack(notes[note]);
  //  notesPlayed = notesplayed + note;
    writeMelodyJson(notes[note]);
}


function stopSound() {
    synth.triggerRelease();
}

</script>

    <script>
        // Initialize Firebase
        var config = {
            apiKey: "AIzaSyD0cf2mNyPChLU8FAVUhgw2rwVsLjKYty8",
            authDomain: "tune-in-b3959.firebaseapp.com",
            databaseURL: "https://tune-in-b3959.firebaseio.com",
            projectId: "tune-in-b3959",
            storageBucket: "tune-in-b3959.appspot.com",
            messagingSenderId: "219762201728"
        };
        firebase.initializeApp(config);

        var dbRef = firebase.database().ref().child('midislim')
        dbRef.on('value', snapshot => {
            console.log('retrieving')
            console.log(snapshot.val())
            play(snapshot.val())
        });

        function play(midi) {
            var synth = new Tone.PolySynth(8).toMaster();

            // pass in the note events from one of the tracks as the second argument to Tone.Part
            var midiPart = new Tone.Part(function (time, note) {

                //use the events to play the synth
                synth.triggerAttackRelease(note.name, note.duration, time, note.velocity)

            }, midi.notes).start();

            // start the transport to hear the events
            Tone.Transport.start();
        }
    </script>

    <div id='container1'>
      <div id='container2'>
        <div class='white_key key' onmousedown='pushSound(0)' onmouseup='stopSound()'></div>
        <div onmousedown='pushSound(0)' onmouseup='stopSound()'></div>
        <div onmousedown='pushSound(1)' onmouseup='stopSound()'></div>
        <div class='black_key key' onmousedown='pushSound(1)' onmouseup='stopSound()'></div>
        <div class='white_key key' onmousedown='pushSound(2)' onmouseup='stopSound()'></div>
        <div onmousedown='pushSound(2)' onmouseup='stopSound()'></div>
        <div onmousedown='pushSound(3)' onmouseup='stopSound()'></div>
        <div class='black_key key' onmousedown='pushSound(3)' onmouseup='stopSound()'></div>
        <div class='white_key key' onmousedown='pushSound(4)' onmouseup='stopSound()'></div>
        <div onmousedown='pushSound(4)' onmouseup='stopSound()'></div>
        <div class='white_key key' onmousedown='pushSound(5)' onmouseup='stopSound()'></div>
        <div onmousedown='pushSound(5)' onmouseup='stopSound()'></div>
        <div onmousedown='pushSound(6)' onmouseup='stopSound()'></div>
        <div class='black_key key' onmousedown='pushSound(6)' onmouseup='stopSound()'></div>
        <div class='white_key key' onmousedown='pushSound(7)' onmouseup='stopSound()'></div>
        <div onmousedown='pushSound(7)' onmouseup='stopSound()'></div>
        <div onmousedown='pushSound(8)' onmouseup='stopSound()'></div>
        <div class='black_key key' onmousedown='pushSound(8)' onmouseup='stopSound()'></div>
        <div class='white_key key' onmousedown='pushSound(9)' onmouseup='stopSound()'></div>
        <div onmousedown='pushSound(9)' onmouseup='stopSound()'></div>
        <div onmousedown='pushSound(10)' onmouseup='stopSound()'></div>
        <div class='black_key key' onmousedown='pushSound(10)' onmouseup='stopSound()'></div>
        <div class='white_key key' onmousedown='pushSound(11)' onmouseup='stopSound()'></div>
        <div onmousedown='pushSound(11)' onmouseup='stopSound()'></div>
        <div class='white_key key' onmousedown='pushSound(0)' onmouseup='stopSound()'></div>
        <div onmousedown='pushSound(0)' onmouseup='stopSound()'></div>
        <div onmousedown='pushSound(1)' onmouseup='stopSound()'></div>
        <div class='black_key key' onmousedown='pushSound(1)' onmouseup='stopSound()'></div>
        <div class='white_key key' onmousedown='pushSound(2)' onmouseup='stopSound()'></div>
        <div onmousedown='pushSound(2)' onmouseup='stopSound()'></div>
        <div onmousedown='pushSound(3)' onmouseup='stopSound()'></div>
        <div class='black_key key' onmousedown='pushSound(3)' onmouseup='stopSound()'></div>
        <div class='white_key key' onmousedown='pushSound(4)' onmouseup='stopSound()'></div>
        <div onmousedown='pushSound(4)' onmouseup='stopSound()'></div>
        <div class='white_key key' onmousedown='pushSound(5)' onmouseup='stopSound()'></div>
        <div onmousedown='pushSound(5)' onmouseup='stopSound()'></div>
        <div onmousedown='pushSound(6)' onmouseup='stopSound()'></div>
        <div class='black_key key' onmousedown='pushSound(6)' onmouseup='stopSound()'></div>
        <div class='white_key key' onmousedown='pushSound(7)' onmouseup='stopSound()'></div>
        <div onmousedown='pushSound(7)' onmouseup='stopSound()'></div>
        <div onmousedown='pushSound(8)' onmouseup='stopSound()'></div>
        <div class='black_key key' onmousedown='pushSound(8)' onmouseup='stopSound()'></div>
        <div class='white_key key' onmousedown='pushSound(9)' onmouseup='stopSound()'></div>
        <div onmousedown='pushSound(9)' onmouseup='stopSound()'></div>
        <div onmousedown='pushSound(10)' onmouseup='stopSound()'></div>
        <div class='black_key key' onmousedown='pushSound(10)' onmouseup='stopSound()'></div>
        <div class='white_key key' onmousedown='pushSound(11)' onmouseup='stopSound()'></div>
        <div onmousedown='pushSound(11)' onmouseup='stopSound()'></div>
        <div class='white_key key' onmousedown='pushSound(0)' onmouseup='stopSound()'></div>
        <div onmousedown='pushSound(0)' onmouseup='stopSound()'></div>
        <div onmousedown='pushSound(1)' onmouseup='stopSound()'></div>
        <div class='black_key key' onmousedown='pushSound(1)' onmouseup='stopSound()'></div>
        <div class='white_key key' onmousedown='pushSound(2)' onmouseup='stopSound()'></div>
        <div onmousedown='pushSound(2)' onmouseup='stopSound()'></div>
        <div onmousedown='pushSound(3)' onmouseup='stopSound()'></div>
        <div class='black_key key' onmousedown='pushSound(3)' onmouseup='stopSound()'></div>
        <div class='white_key key' onmousedown='pushSound(4)' onmouseup='stopSound()'></div>
        <div onmousedown='pushSound(4)' onmouseup='stopSound()'></div>
        <div class='white_key key' onmousedown='pushSound(5)' onmouseup='stopSound()'></div>
        <div onmousedown='pushSound(5)' onmouseup='stopSound()'></div>
        <div onmousedown='pushSound(6)' onmouseup='stopSound()'></div>
        <div class='black_key key' onmousedown='pushSound(6)' onmouseup='stopSound()'></div>
        <div class='white_key key' onmousedown='pushSound(7)' onmouseup='stopSound()'></div>
        <div onmousedown='pushSound(7)' onmouseup='stopSound()'></div>
        <div onmousedown='pushSound(8)' onmouseup='stopSound()'></div>
        <div class='black_key key' onmousedown='pushSound(8)' onmouseup='stopSound()'></div>
        <div class='white_key key' onmousedown='pushSound(9)' onmouseup='stopSound()'></div>
        <div onmousedown='pushSound(9)' onmouseup='stopSound()'></div>
        <div onmousedown='pushSound(10)' onmouseup='stopSound()'></div>
        <div class='black_key key' onmousedown='pushSound(10)' onmouseup='stopSound()'></div>
        <div class='white_key key' onmousedown='pushSound(11)' onmouseup='stopSound()'></div>
        <div onmousedown='pushSound(11)' onmouseup='stopSound()'></div>
        <div class='white_key key' onmousedown='pushSound(0)' onmouseup='stopSound()'></div>
        <div onmousedown='pushSound(0)' onmouseup='stopSound()'></div>
        <div onmousedown='pushSound(1)' onmouseup='stopSound()'></div>
        <div class='black_key key' onmousedown='pushSound(1)' onmouseup='stopSound()'></div>
        <div class='white_key key' onmousedown='pushSound(2)' onmouseup='stopSound()'></div>
        <div onmousedown='pushSound(2)' onmouseup='stopSound()'></div>
        <div onmousedown='pushSound(3)' onmouseup='stopSound()'></div>
        <div class='black_key key' onmousedown='pushSound(3)' onmouseup='stopSound()'></div>
        <div class='white_key key' onmousedown='pushSound(4)' onmouseup='stopSound()'></div>
        <div onmousedown='pushSound(4)' onmouseup='stopSound()'></div>
        <div class='white_key key' onmousedown='pushSound(5)' onmouseup='stopSound()'></div>
        <div onmousedown='pushSound(5)' onmouseup='stopSound()'></div>
        <div onmousedown='pushSound(6)' onmouseup='stopSound()'></div>
        <div class='black_key key' onmousedown='pushSound(6)' onmouseup='stopSound()'></div>
        <div class='white_key key' onmousedown='pushSound(7)' onmouseup='stopSound()'></div>
        <div onmousedown='pushSound(7)' onmouseup='stopSound()'></div>
        <div onmousedown='pushSound(8)' onmouseup='stopSound()'></div>
        <div class='black_key key' onmousedown='pushSound(8)' onmouseup='stopSound()'></div>
        <div class='white_key key' onmousedown='pushSound(9)' onmouseup='stopSound()'></div>
        <div onmousedown='pushSound(9)' onmouseup='stopSound()'></div>
        <div onmousedown='pushSound(10)' onmouseup='stopSound()'></div>
        <div class='black_key key' onmousedown='pushSound(10)' onmouseup='stopSound()'></div>
        <div class='white_key key' onmousedown='pushSound(11)' onmouseup='stopSound()'></div>
        <div onmousedown='pushSound(11)' onmouseup='stopSound()'></div>
        <div class='white_key key' onmousedown='pushSound(0)' onmouseup='stopSound()'></div>
        <div onmousedown='pushSound(0)' onmouseup='stopSound()'></div>
        <div onmousedown='pushSound(1)' onmouseup='stopSound()'></div>
        <div class='black_key key' onmousedown='pushSound(1)' onmouseup='stopSound()'></div>
        <div class='white_key key' onmousedown='pushSound(2)' onmouseup='stopSound()'></div>
        <div onmousedown='pushSound(2)' onmouseup='stopSound()'></div>
        <div onmousedown='pushSound(3)' onmouseup='stopSound()'></div>
        <div class='black_key key' onmousedown='pushSound(3)' onmouseup='stopSound()'></div>
        <div class='white_key key' onmousedown='pushSound(4)' onmouseup='stopSound()'></div>
        <div onmousedown='pushSound(4)' onmouseup='stopSound()'></div>
        <div class='white_key key' onmousedown='pushSound(5)' onmouseup='stopSound()'></div>
        <div onmousedown='pushSound(5)' onmouseup='stopSound()'></div>
        <div onmousedown='pushSound(6)' onmouseup='stopSound()'></div>
        <div class='black_key key' onmousedown='pushSound(6)' onmouseup='stopSound()'></div>
        <div class='white_key key' onmousedown='pushSound(7)' onmouseup='stopSound()'></div>
        <div onmousedown='pushSound(7)' onmouseup='stopSound()'></div>
        <div onmousedown='pushSound(8)' onmouseup='stopSound()'></div>
        <div class='black_key key' onmousedown='pushSound(8)' onmouseup='stopSound()'></div>
        <div class='white_key key' onmousedown='pushSound(9)' onmouseup='stopSound()'></div>
        <div onmousedown='pushSound(9)' onmouseup='stopSound()'></div>
        <div onmousedown='pushSound(10)' onmouseup='stopSound()'></div>
        <div class='black_key key' onmousedown='pushSound(10)' onmouseup='stopSound()'></div>
        <div class='white_key key' onmousedown='pushSound(11)' onmouseup='stopSound()'></div>
        <div onmousedown='pushSound(11)' onmouseup='stopSound()'></div>
        <div class='white_key key' onmousedown='pushSound(0)' onmouseup='stopSound()'></div>
        <div onmousedown='pushSound(0)' onmouseup='stopSound()'></div>
        <div onmousedown='pushSound(1)' onmouseup='stopSound()'></div>
        <div class='black_key key' onmousedown='pushSound(1)' onmouseup='stopSound()'></div>
        <div class='white_key key' onmousedown='pushSound(2)' onmouseup='stopSound()'></div>
        <div onmousedown='pushSound(2)' onmouseup='stopSound()'></div>
        <div onmousedown='pushSound(3)' onmouseup='stopSound()'></div>
        <div class='black_key key' onmousedown='pushSound(3)' onmouseup='stopSound()'></div>
        <div class='white_key key' onmousedown='pushSound(4)' onmouseup='stopSound()'></div>
        <div onmousedown='pushSound(4)' onmouseup='stopSound()'></div>
        <div class='white_key key' onmousedown='pushSound(5)' onmouseup='stopSound()'></div>
        <div onmousedown='pushSound(5)' onmouseup='stopSound()'></div>
        <div onmousedown='pushSound(6)' onmouseup='stopSound()'></div>
        <div class='black_key key' onmousedown='pushSound(6)' onmouseup='stopSound()'></div>
        <div class='white_key key' onmousedown='pushSound(7)' onmouseup='stopSound()'></div>
        <div onmousedown='pushSound(7)' onmouseup='stopSound()'></div>
        <div onmousedown='pushSound(8)' onmouseup='stopSound()'></div>
        <div class='black_key key' onmousedown='pushSound(8)' onmouseup='stopSound()'></div>
        <div class='white_key key' onmousedown='pushSound(9)' onmouseup='stopSound()'></div>
        <div onmousedown='pushSound(9)' onmouseup='stopSound()'></div>
        <div onmousedown='pushSound(10)' onmouseup='stopSound()'></div>
        <div class='black_key key' onmousedown='pushSound(10)' onmouseup='stopSound()'></div>
        <div class='white_key key' onmousedown='pushSound(11)' onmouseup='stopSound()'></div>
        <div onmousedown='pushSound(11)' onmouseup='stopSound()'></div>
        <div class='white_key key' onmousedown='pushSound(0)' onmouseup='stopSound()'></div>
        <div onmousedown='pushSound(0)' onmouseup='stopSound()'></div>
        <div onmousedown='pushSound(1)' onmouseup='stopSound()'></div>
        <div class='black_key key' onmousedown='pushSound(1)' onmouseup='stopSound()'></div>
        <div class='white_key key' onmousedown='pushSound(2)' onmouseup='stopSound()'></div>
        <div onmousedown='pushSound(2)' onmouseup='stopSound()'></div>
        <div onmousedown='pushSound(3)' onmouseup='stopSound()'></div>
        <div class='black_key key' onmousedown='pushSound(3)' onmouseup='stopSound()'></div>
        <div class='white_key key' onmousedown='pushSound(4)' onmouseup='stopSound()'></div>
        <div onmousedown='pushSound(4)' onmouseup='stopSound()'></div>
        <div class='white_key key' onmousedown='pushSound(5)' onmouseup='stopSound()'></div>
        <div onmousedown='pushSound(5)' onmouseup='stopSound()'></div>
        <div onmousedown='pushSound(6)' onmouseup='stopSound()'></div>
        <div class='black_key key' onmousedown='pushSound(6)' onmouseup='stopSound()'></div>
        <div class='white_key key' onmousedown='pushSound(7)' onmouseup='stopSound()'></div>
        <div onmousedown='pushSound(7)' onmouseup='stopSound()'></div>
        <div onmousedown='pushSound(8)' onmouseup='stopSound()'></div>
        <div class='black_key key' onmousedown='pushSound(8)' onmouseup='stopSound()'></div>
        <div class='white_key key' onmousedown='pushSound(9)' onmouseup='stopSound()'></div>
        <div onmousedown='pushSound(9)' onmouseup='stopSound()'></div>
        <div onmousedown='pushSound(10)' onmouseup='stopSound()'></div>
        <div class='black_key key' onmousedown='pushSound(10)' onmouseup='stopSound()'></div>
        <div class='white_key key' onmousedown='pushSound(11)' onmouseup='stopSound()'></div>
        <div onmousedown='pushSound(11)' onmouseup='stopSound()'></div>
      </div>
    </div>


</body>
</html>
